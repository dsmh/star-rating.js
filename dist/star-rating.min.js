/**!
 * Star Rating
 *
 * Version: 1.2.0
 * Author: Paul Ryley (http://geminilabs.io)
 * URL: https://github.com/geminilabs/star-rating.js
 * License: MIT
 */
!function(t,s,e){"use strict";var i=function(t,s){this.el=t,this.options=s,this.metadata=this.el.getAttribute("data-options"),this.stars=0,this.init()};i.prototype={defaults:{clearable:!0,clickFn:null,initialText:"Click to Rate",showText:!0},init:function(){if("SELECT"===this.el.tagName){for(var t=0;t<this.el.length;t++)if(""!==this.el[t].value){if(isNaN(parseFloat(this.el[t].value))||!isFinite(this.el[t].value))return;this.stars++}if(!(this.stars<1||this.stars>10))return this.config=this._extend({},this.defaults,this.options,this.metadata),this.build(),this._on("change",this.el,this.change.bind(this)),this._on("mouseenter",this.wrap,this.enter.bind(this)),this._on("mouseleave",this.wrap,this.leave.bind(this)),this._on("click",this.wrap,this.select.bind(this)),this.current=this.el.options[this.el.selectedIndex].value,this.selected=this.current,this.width=this.wrap.offsetWidth,this.star=Math.round(this.width/this.stars),this.select(),this}},build:function(){var t={},s={},e=this._createEl("span",{class:"gl-star-rating","data-star-rating":""});this.el.parentNode.insertBefore(e,this.el),e.appendChild(this.el),this.wrap=this._insertAfterEl(this.el,"span",{class:"gl-star-rating-stars"}),this.config.showText&&(this.text=this._insertAfterEl(this.wrap,"span",{class:"gl-star-rating-text"}));for(var i=0;i<this.el.length;i++)""!==this.el[i].value&&(s[this.el[i].value]=this.el[i].text);Object.keys(s).sort().forEach(function(e){t[e]=s[e]});for(var a in t)this._appendTo(this.wrap,"span",{"data-value":a,"data-text":t[a]})},change:function(){this.show(this.el.options[this.el.selectedIndex].value)},clear:function(t){this.config.clearable&&(this.el.value="",this.selected="",this.show(0))},enter:function(){var t=this.wrap.getBoundingClientRect();this._on("mousemove",this.wrap,this.move.bind(this)),this.offsetLeft=t.left+s.body.scrollLeft},getIndexFromPosition:function(t){return Math.min(Math.ceil(Math.max(t-this.offsetLeft,1)/this.star),this.stars)},leave:function(){this._off("mousemove",this.wrap,this.move),this.show(this.selected)},move:function(t){this.show(this.getIndexFromPosition(t.pageX))},select:function(t){var s=this.current;return t!==e&&(s=this.getIndexFromPosition(t.pageX),""!==this.current&&parseFloat(this.selected)===s)?void this.clear():(this.el.value=s,this.selected=s,this.show(s),void(t!==e&&"function"==typeof this.config.clickFn&&this.config.clickFn(this.selected)))},show:function(t){(t<0||""===t)&&(t=0),t>this.stars&&(t=this.stars),this._removeClass(this.wrap,"s"+10*this.current),this._addClass(this.wrap,"s"+10*t),this.config.showText&&(this.text.textContent=t<1?this.config.initialText:this.wrap.childNodes[t-1].dataset.text),this.current=t},_addClass:function(t,s){t.classList?t.classList.add(s):this._hasClass(t,s)||(t.className+=" "+s)},_appendTo:function(t,s,e){var i=this._createEl(s,e);t.innerHTML+=i.outerHTML},_createEl:function(t,e){var i="string"==typeof t?s.createElement(t):t;e=e||{};for(var a in e)i.setAttribute(a,e[a]);return i},_extend:function(){var t=[].slice.call(arguments),s=!1;"boolean"==typeof t[0]&&(s=t.shift());for(var e=t[0],i=t.slice(1),a=i.length,n=0;n<a;n++){var h=i[n];for(var r in h){var o=h[r];if(s&&o&&"object"==typeof o){var l=Array.isArray(o)?[]:{};e[r]=this._extend(!0,l,o)}else e[r]=o}}return e},_hasClass:function(t,s){return t.classList?t.classList.contains(s):new RegExp("\\b"+s+"\\b").test(t.className)},_insertAfterEl:function(t,s,e){var i=this._createEl(s,e);return t.parentNode.insertBefore(i,t.nextSibling),i},_off:function(t,s,e){s.detachEvent?s.detachEvent("on"+t,e):s.removeEventListener(t,e)},_on:function(t,s,e){s.attachEvent?s.attachEvent("on"+t,e):s.addEventListener(t,e)},_removeClass:function(t,s){t.classList?t.classList.remove(s):t.className=t.className.replace(new RegExp("\\b"+s+"\\b","g"),"")}},i.defaults=i.prototype.defaults,t.jQuery&&(jQuery.fn.starrating=function(t){return this.each(function(){jQuery.data(this,"plugin_starrating")||jQuery.data(this,"plugin_starrating",new i(this,t))})}),t.StarRating=i}(window,document);
/*!
 * Star Rating
 * @version: 2.2.0
 * @author: Paul Ryley (http://geminilabs.io)
 * @url: https://github.com/geminilabs/star-rating.js
 * @license: MIT
 */
!function(i,n,t){"use strict";var s=function(t,i){this.selects="[object String]"==={}.toString.call(t)?n.querySelectorAll(t):[t],this.destroy=function(){this.widgets.forEach(function(t){t.t()})},this.rebuild=function(){this.widgets.forEach(function(t){t.i()})},this.widgets=[];for(var s=0;s<this.selects.length;s++)if("SELECT"===this.selects[s].tagName){var h=new e(this.selects[s],i);void 0!==h.direction&&this.widgets.push(h)}},e=function(t,i){this.el=t,this.s=this.h({},this.defaults,i||{},JSON.parse(t.getAttribute("data-options"))),this.n(),this.stars<1||this.stars>this.s.maxStars||this.e()};e.prototype={defaults:{classname:"gl-star-rating",clearable:!0,initialText:"Select a Rating",maxStars:10,onClick:null,showText:!0},e:function(){this.o(),this.current=this.selected=this.r(),this.u(),this.a(),this.c(),this.f(this.current),this.l("add")},v:function(){this.s.showText&&(this.textEl=this.d(this.widgetEl,{class:this.s.classname+"-text"},!0))},a:function(){var t=this._(),i=this.d(this.el,{class:this.s.classname+"-stars"},!0);for(var s in t)if(t.hasOwnProperty(s)){var h=this.m({"data-value":s,"data-text":t[s]});i.innerHTML+=h.outerHTML}this.widgetEl=i,this.v()},g:function(t){(t<0||""===t)&&(t=0),t>this.stars&&(t=this.stars),this.widgetEl.classList.remove("s"+10*this.current),this.widgetEl.classList.add("s"+10*t),this.s.showText&&(this.textEl.textContent=t<1?this.s.initialText:this.widgetEl.childNodes[t-1].dataset.text),this.current=t},m:function(t){var i=n.createElement("span");for(var s in t=t||{})t.hasOwnProperty(s)&&i.setAttribute(s,t[s]);return i},t:function(){this.l("remove");var t=this.el.parentNode;t.parentNode.replaceChild(this.el,t)},p:function(i,s,t){t.forEach(function(t){i[s+"EventListener"](t,this.events[t])}.bind(this))},h:function(){var t=[].slice.call(arguments),s=t[0],h=t.slice(1);return Object.keys(h).forEach(function(t){for(var i in h[t])h[t].hasOwnProperty(i)&&(s[i]=h[t][i])}),s},w:function(t){var i={},s=this.widgetEl.offsetWidth;return i.ltr=Math.max(t-this.offsetLeft,1),i.rtl=s-i.ltr,Math.min(Math.ceil(i[this.direction]/Math.round(s/this.stars)),this.stars)},_:function(){for(var t=this.el,i={},s={},h=0;h<t.length;h++)this.M(t[h])||(i[t[h].value]=t[h].text);return Object.keys(i).sort().forEach(function(t){s[t]=i[t]}),s},r:function(){return parseInt(this.el.options[Math.max(this.el.selectedIndex,0)].value)||0},l:function(t){var i=this.el.closest("form");this.p(this.el,t,["change","keydown"]),this.p(this.widgetEl,t,["mousedown","mouseleave","mousemove","mouseover","touchend","touchmove","touchstart"]),i&&this.p(i,t,["reset"])},o:function(){this.events={change:this.b.bind(this),keydown:this.S.bind(this),mousedown:this.y.bind(this),mouseleave:this.x.bind(this),mousemove:this.L.bind(this),mouseover:this.j.bind(this),reset:this.C.bind(this),touchend:this.y.bind(this),touchmove:this.L.bind(this),touchstart:this.j.bind(this)}},d:function(t,i,s){var h=this.m(i);return t.parentNode.insertBefore(h,!0===s?t.nextSibling:t),h},M:function(t){return null===t.getAttribute("value")||""===t.value},b:function(){this.g(this.r())},S:function(t){if(-1!==["ArrowLeft","ArrowRight"].indexOf(t.key)){var i="ArrowLeft"===t.key?-1:1;"rtl"===this.direction&&(i*=-1),this.f(Math.min(Math.max(this.r()+i,0),this.stars))}},y:function(t){t.preventDefault();var i=this.w(t.pageX);if(0!==this.current&&parseFloat(this.selected)===i&&this.s.clearable)return this.C();this.f(i),"function"==typeof this.s.onClick&&this.s.onClick.call(this,this.el)},x:function(t){t.preventDefault(),this.g(this.selected)},L:function(t){t.preventDefault(),this.g(this.w(t.pageX))},j:function(t){t.preventDefault();var i=this.widgetEl.getBoundingClientRect();this.offsetLeft=i.left+n.body.scrollLeft},C:function(){var t=this.el.querySelector("[selected]"),i=t?t.value:"";this.el.value=i,this.selected=parseInt(i)||0,this.g(i)},i:function(){this.el.parentNode.classList.contains(this.s.classname)&&this.t(),this.e()},c:function(){var t=this.el.parentNode;this.direction=i.getComputedStyle(t,null).getPropertyValue("direction"),t.classList.add(this.s.classname+"-"+this.direction)},f:function(t){this.el.value=t,this.selected=t,this.g(t)},n:function(){for(var t=this.el,i=this.stars=0;i<t.length;i++)if(!this.M(t[i])){if(isNaN(parseFloat(t[i].value))||!isFinite(t[i].value))return void(this.stars=0);this.stars++}},u:function(){this.d(this.el,{class:this.s.classname,"data-star-rating":""}).appendChild(this.el)}},"function"==typeof define&&define.amd?define([],function(){return s}):"object"==typeof module&&module.exports?module.exports=s:i.StarRating=s}(window,document);